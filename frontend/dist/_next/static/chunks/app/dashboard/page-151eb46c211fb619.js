(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{1913:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>n,TV:()=>s,p4:()=>l});let a=(0,r(5710).Z0)({name:"auth",initialState:{isAuthenticated:!1},reducers:{setAuth:e=>{e.isAuthenticated=!0},setLogout:e=>{e.isAuthenticated=!1}}}),{setAuth:s,setLogout:l}=a.actions,n=a.reducer},3930:(e,t,r)=>{"use strict";r.d(t,{G:()=>u,M:()=>o});var a=r(5710),s=r(8372),l=r(1913),n=r(4540);let o=(0,a.U1)({reducer:{[s.l.reducerPath]:s.l.reducer,auth:l.Ay},middleware:e=>e().concat(s.l.middleware),devTools:!1}),u=n.d4},5539:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var a=r(5155),s=r(2115),l=r(6961);function n(e){let{title:t,url:r}=e;return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 mb-4 shadow-md hover:shadow-lg transition-shadow",style:{width:"350px",height:"350px"},children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:t}),(0,a.jsx)("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Read More"})]})}let o=()=>{let{feed:e,loading:t}=(0,l.p$)();return(0,a.jsx)("div",{className:"flex justify-center min-h-screen",children:(0,a.jsx)("div",{className:"mt-20 w-full max-w-[1150px] h-[900px] bg-gray-400 rounded-lg p-4 overflow-y-auto",children:t?(0,a.jsx)("p",{className:"text-center text-gray-800",children:"Loading news..."}):0===e.length?(0,a.jsx)("p",{className:"text-center text-gray-800",children:"No news available."}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((e,t)=>(0,a.jsx)(n,{title:e.title||"No title",url:e.url||"#"},t))})})})};var u=r(6874),i=r.n(u);let c=e=>{let{links:t}=e;return(0,a.jsx)("div",{className:"w-full flex flex-row justify-between items-center bg-slate-800 text-white text-2xl font-mono font-bold px-6 py-4",children:t.map((e,t)=>(0,a.jsx)(i(),{href:e.path,legacyBehavior:!0,children:(0,a.jsx)("a",{onClick:e.onClick,className:"hover:text-gray-300 ".concat(e.highlight?"bg-slate-700 px-4 py-2 rounded-md":""),children:e.name})},t))})};var d=r(3930),h=r(5695);let p=()=>{let e=(0,h.useRouter)(),{onClick:t}=(0,l.Wn)(),r=(0,d.G)(e=>e.auth.isAuthenticated);return(0,s.useEffect)(()=>{!1==r&&e.push("/auth/login")},[r,e]),(0,a.jsxs)("div",{className:"w-full bg-black text-white",children:[(0,a.jsx)(c,{links:[{name:"News",path:"/dashboard"},{name:"Logout",path:"/auth/login",onClick:t}]}),(0,a.jsx)(o,{})]})}},6961:(e,t,r)=>{"use strict";r.d(t,{vz:()=>h,Wn:()=>m,p$:()=>g,yC:()=>p});var a=r(2115),s=r(5695),l=r(5799);let{useLoginMutation:n,useLogoutMutation:o,useSignupMutation:u,useCheckQuery:i}=r(8372).l.injectEndpoints({endpoints:e=>({login:e.mutation({query:e=>{let{email:t,password:r}=e;return{url:"auth/login",method:"POST",body:{email:t,password:r}}}}),logout:e.mutation({query:()=>({url:"auth/logout",method:"POST"})}),signup:e.mutation({query:e=>{let{email:t,password:r,re_password:a}=e;return{url:"auth/signup",method:"POST",body:{email:t,password:r,re_password:a}}}}),check:e.query({query:()=>"auth/check"})})});var c=r(4540),d=r(1913);function h(){let e=(0,c.wA)(),t=(0,s.useRouter)(),[r,{isLoading:o}]=n(),[u,i]=(0,a.useState)({email:"",password:""}),{email:h,password:p}=u,g=async a=>{a.preventDefault(),r({email:h,password:p}).unwrap().then(()=>{e((0,d.TV)()),l.oR.success("Logged in"),t.push("/dashboard")}).catch(()=>{l.oR.error("Failed to log in")})};return{email:h,password:p,onChange:e=>{let{name:t,value:r}=e.target;i({...u,[t]:r})},onSubmit:g}}function p(){(0,c.wA)();let e=(0,s.useRouter)(),[t,{isLoading:r}]=u(),[n,o]=(0,a.useState)({email:"",password:"",re_password:""}),{email:i,password:d,re_password:h}=n,p=async r=>{r.preventDefault(),t({email:i,password:d,re_password:h}).unwrap().then(()=>{l.oR.success("Please check email to verify account"),e.push("/auth/login")}).catch(()=>{l.oR.error("Failed to register account")})};return{email:i,password:d,re_password:h,onChange:e=>{let{name:t,value:r}=e.target;o({...n,[t]:r})},onSubmit:p}}function g(){let[e,t]=(0,a.useState)([]),[r,s]=(0,a.useState)(!1),l="https://api.nytimes.com/svc/news/v3/content/all/all.json?api-key=".concat("BEy3Udrr5KxVAFA8LCHFt4A5CzGUBSQo");return(0,a.useEffect)(()=>{(async()=>{s(!0);try{let e=await fetch(l,{method:"GET"});if(!e.ok)throw Error("Network response was not ok");let r=await e.json();t(r.results.map(e=>({title:e.title,url:e.url})))}catch(e){}finally{s(!1)}})()},[]),{feed:e,loading:r}}function m(){let e=(0,c.wA)(),t=(0,s.useRouter)(),[r,{isLoading:a}]=o();return{onClick:a=>{a.preventDefault(),r({}).unwrap().then(()=>{e((0,d.p4)()),l.oR.success("Logged out successfully"),t.push("/auth/login")}).catch(()=>{l.oR.error("Failed to log out")})}}}},8372:(e,t,r)=>{"use strict";r.d(t,{l:()=>n});var a=r(4317),s=r(404);let l=(0,a.cw)({baseUrl:"http://localhost:5000/api/"}),n=(0,s.xP)({baseQuery:l,tagTypes:["User"],endpoints:e=>({})})},8683:(e,t,r)=>{Promise.resolve().then(r.bind(r,5539))}},e=>{var t=t=>e(e.s=t);e.O(0,[404,670,441,684,358],()=>t(8683)),_N_E=e.O()}]);